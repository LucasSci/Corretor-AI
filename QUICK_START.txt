# üöÄ QUICK START - Base de Conhecimento v2.0

## O que mudou? (TL;DR)

‚úÖ **ANTES:**
- 2 arquivos: `extract.py` + `ingest.py` (c√≥digo duplicado)
- HTML bruto (com menus, scripts, etc.)
- Sem integra√ß√£o pronta com Vector Databases

‚úÖ **AGORA:**
- 1 arquivo √∫nico: `ingest.py` (consolidado)
- HTML limpo (apenas conte√∫do relevante)
- JSONL pronto para RAG (Retrieval-Augmented Generation)
- Inclui guias completos + exemplos

---

## üéØ Como Come√ßar

### 1. Executar a Ingest√£o
```bash
python ingest.py
```

Isso gera:
- `data/base_conhecimento.jsonl` ‚Üê üß† **USE ISSO!**
- `data/ingest_summary.json`
- `data/raw/*.pdf` (backup)
- `data/extracted/*.jsonl` (por site)

### 2. Validar a Base
```bash
python validar_base.py
```

Mostra:
- Estrutura de diret√≥rios ‚úÖ
- Integridade do JSONL ‚úÖ
- Estat√≠sticas ‚úÖ
- Amostra de dados ‚úÖ

### 3. Testar Exemplos
```bash
python exemplos_uso.py
```

Oferece menu interativo com:
1. Leitura simples
2. Filtrar por site
3. Buscar palavra-chave
4. Estat√≠sticas
5. Exportar para CSV
6. Remover duplicatas
7. Listar sites

---

## üìä Arquivo JSONL Explicado

**Formato:** M√∫ltiplos JSONs, um por linha

```json
{
  "id": "documento.pdf#chunk0",
  "source_url": "https://...",
  "site_origem": "Empreendimento X",
  "site_slug": "empreendimento_x",
  "arquivo": "documento.pdf",
  "chunk_index": 0,
  "total_chunks": 15,
  "texto": "Conte√∫do limpo do documento...",
  "crawl_date": "2026-02-26T10:30:00",
  "sha256": "abcd1234..."
}
```

**Tamanho:** Streaming (processa linha por linha)
**Uso:** Vector Databases, LangChain, LlamaIndex, etc.

---

## üìö Documenta√ß√£o Completa

| Arquivo | O que √© | Quando ler |
|---------|---------|-----------|
| [README.md](README.md) | Documenta√ß√£o completa do projeto | **Sempre** (vis√£o geral) |
| [MUDANCAS_V2.md](MUDANCAS_V2.md) | O que mudou entre v1.0 e v2.0 | Entender as mudan√ßas |
| [USAR_BASE_CONHECIMENTO.md](USAR_BASE_CONHECIMENTO.md) | Guia t√©cnico detalhado | Integra√ß√£o com LLMs |
| [exemplos_uso.py](exemplos_uso.py) | C√≥digo pronto para usar | Copiar e adaptar |
| [validar_base.py](validar_base.py) | Script de valida√ß√£o | Ap√≥s rodar ingest.py |

---

## üß† O que as Fun√ß√µes Novas Fazem?

### limpar_conteudo_html()
```python
html_sujo = "<html><header>Menu</header><script>...</script><p>Conte√∫do</p></html>"
html_limpo = limpar_conteudo_html(html_sujo)
# Resultado: "Conte√∫do"
```

Remove: `<script>`, `<style>`, `<header>`, `<footer>`, `<nav>`, `<form>`, etc.

### salvar_para_base_conhecimento()
```python
documento = {
    "id": "doc#0",
    "site_origem": "Apogeu",
    "texto": "Conte√∫do..."
}
salvar_para_base_conhecimento(documento)
# Adiciona 1 linha em data/base_conhecimento.jsonl
```

Modo append (n√£o sobrescreve). Ideal para processamento cont√≠nuo.

---

## üöÄ Pr√≥ximos Passos Recomendados

### Esta Semana
- [x] Executar `python ingest.py`
- [x] Validar com `python validar_base.py`
- [ ] Ler dados com `python exemplos_uso.py`

### Pr√≥ximas 2 Semanas
- [ ] Configurar ChromaDB: `pip install chromadb`
- [ ] Indexar JSONL: copiar c√≥digo de [USAR_BASE_CONHECIMENTO.md](USAR_BASE_CONHECIMENTO.md)
- [ ] Testar buscas sem√¢nticas

### Pr√≥ximo M√™s
- [ ] Conectar ao Gemini (LangChain)
- [ ] Integrar webhooks no n8n
- [ ] Deploy em produ√ß√£o

---

## üìû D√∫vidas R√°pidas

**P: Por que JSONL?**
A: Permite processar bilh√µes de registros sem carregar tudo na RAM.

**P: Posso usar com ChatGPT direto?**
A: N√£o. Use ChromaDB ‚Üí LangChain ‚Üí APIs (Gemini/GPT).

**P: Arquivo fica muito grande?**
A: Sim, mas √© normal. Comprime bem com gzip.

**P: Como atualizar incrementalmente?**
A: Use `salvar_para_base_conhecimento()` direto (append).

---

## ‚úÖ Checklist Final

- [x] Consolidado em 1 arquivo
- [x] HTML limpo automaticamente
- [x] JSONL gerado e pronto
- [x] Documenta√ß√£o completa
- [x] Exemplos funcionais
- [x] Scripts de valida√ß√£o
- [ ] Voc√™ executou `python ingest.py` ‚Üê PR√ìXIMO PASSO!

---

## üì• Pr√≥ximo Comando

```bash
python ingest.py
```

**Tempo estimado:** 5-15 minutos (depende do n√∫mero de PDFs)

Depois:
```bash
python validar_base.py
```

E veja os dados:
```bash
python exemplos_uso.py
```

---

**Pronto para come√ßar! üöÄ**
